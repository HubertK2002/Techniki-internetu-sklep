{# templates/product/product_card.html.twig #}

<div class="card h-100 shadow-sm">
	{% if product.Image %}
		<img src="{{ asset('products/' ~ product.Image) }}" alt="{{ product.Name }}">
	{% else %}
		<div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 180px;">
			<span class="text-muted">Brak zdjęcia</span>
		</div>
	{% endif %}

	<div class="card-body d-flex flex-column">
		<h5 class="card-title mb-2">{{ product.Name }}</h5>

		{% if product.Description %}
			<p class="card-text text-muted small mb-3">
				{{ product.Description|striptags|u.truncate(120, '…') }}
			</p>
		{% endif %}

		<div class="mt-auto d-flex justify-content-between align-items-center">
			<div class="fw-semibold">
				{{ product.Price|number_format(2, ',', ' ') }} zł
			</div>
			<div class="d-flex column gap-3">
				<button
					type="button"
					class=" js-add-to-cart bg-transparent border-0 p-0"
					data-url="{{ path('cart_add', { id: product.id }) }}"
				>
					<img src="{{ asset('images/shop_cart.svg') }}" alt="Artex" height="20">
				</button>
				{% set in_wishlist = app.user and app.user.wishlist and app.user.wishlist.hasProduct(product) %}
				<div class="js-wishlist-toggle-container">
					{{ include('wishlist/_toggle_button.html.twig', { product: product, in_wishlist: in_wishlist }) }}
				</div>
			</div>
			
		</div>

		<div class="d-flex gap-2 mt-2">
			{% if product.Stock is not null %}
				{% if product.Stock > 0 %}
					<span class="badge text-bg-success">Dostępny: {{ product.Stock }}</span>
				{% else %}
					<span class="badge text-bg-danger">Brak</span>
				{% endif %}
			{% endif %}
			

			
		</div>
	</div>
</div>
